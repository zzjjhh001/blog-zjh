# 进制转换
## 十进制转其他
```javascript
// 十进制100转成16进制
const b = (100).toString(16)
```
## 其他进制转十进制
```javascript
// 十六进制方法，转十进制
const a = parseInt('ff', 16);
```
# 字符
- 字符集：就是字符的集合，如常见的 ASCII字符集，GB2312字符集，Unicode字符集等。这些不同字符集之间最大的区别是所包含的字符数量的不同。
- 字符编码：则代表字符集的实际编码规则，是用于计算机解析字符的，如 GB2312，GBK，UTF-8 等。字符编码的本质就是如何使用二进制字节来表示字符的问题。
- 同一字符集可能有多种字符编码，如Unicode字符集就有 UTF-8，UTF-16 等。
- js采用Unicode字符集。
- javascript源码文本使用的是UTF-8编码，但是代码中的字符串类型是UTF-16编码。
- ASCII是最基础的字符集，所有的别的字符集都是对它的扩展
## 编码
### UTF-8编码规则
字节数     | 码点位数 | 码点范围 | 编码方式
-------- | ----- | ----- | -----
1 | 7 | U+0000~U+007F | 0xxxxxxx
2 | 11 | U+0080~U+07FF | 110xxxxx 0xxxxxx
3 | 16 | U+0800~U+FFFF | 1110xxxx 10xxxxxx 10xxxxxx
4 | 21 | U+10000~U+10FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
### 计算字符在某种编码规则下的值
```javascript
const a = '好'
// 1. 获取码点
const maPoint = a.codePointAt();
// 22909
// 2. 获取码点对应的二进制值
maPoint.toString(2)
// 101100101111101
// 3. 根据编码规则得到编码，比如UTF-8编码规则
得到 11100101 10100101 10111101
// 转成16进制
E5 A5 BD
encodeURL('好') // %E5%A5%BD
1101111000000100  1101100000111101
```
### UTF-16
- UTF-16编码中，基本平面的字符占用2个字节，辅助平面的字符占用4个字节
- Javascript中的字符串是基于UTF-16编码的，大端序字节。
#### 规则
- 码点小于U+FFFF，基本字符，不需处理，直接使用，占两个字节。
- 否则，拆分成两个码元，四个字节，cp表示码点：
- 低位——((cp - 65536) / 1024) + 0xD800，值范围是 0xD800~0xDBFF；
- 高位——((cp - 65536) % 1024) + 0xDC00，值范围是 0xDC00~0xDFFF。
### javascript中字符串长度的计算
- ASCII码和大部分中文，都是一个码元，长度是1
- 而表情字符和其他特殊字符都是两个码元，长度是2
#### 特殊情况
- 多码元字符 '😃'[0]: '\uD83D',会分割字符，取前面的码元。
- 循环时，for会分割，for of不会
```javascript
const a = '😃'
for(let i = 0; i < smile.length; i++) { 
  console.log(smile[i]) 
}
// �
// �

for (let tt of smile) {
  console.log(tt)
}
// 😄
```
- 会分割码元的方法：split()，slice()，charAt()，charCodeAt()，substr()，substring()。
## 常用的api
- charAt：从字符串中返回指定字符，如果是多码元字符，会返回码元字符。（js是UTF-16）
- charCodeAt(index): 返回0-65535之间的整数码点值，多码元而言：返回第一个码元值，index取获取后面的码元
- codePointAt(pos)： 返回Unicode文本集下的码点值。
- formCharCode
fromCodePoint
TextEncoder.encode
// TODO:
## 场景
### encodeURL和encodeURLComponment
- encodeURL和encodeURLComponment都是用于url的编码。
- 都是将特定字符替换成代表字符的UTF-8编码格式的一个到4个字节。
- 区别在于encodeURLComponment的编码的字符范围更大，会将URL元字符：分号（;），逗号（’,’），斜杠（/），问号（?），冒号（:），at（@），&，等号（=），加号（+），美元符号（$），井号（#）也编码。就导致http:// 也会被编码。
- 只是编码url发起请求使用时，使用encodeURL。将URL做参数传递是用encodeURLComponment
- decodeURl和decodeURLComponent：解码

# base64
base64是一种将二进制到ASCILL（部分）的编码规则。
- base64 是由大写字母A-Z、小写字母a-z、数字0-9共62个字符，再加上另外2个+和/构成的。末尾会补充=
### 体积增大三分之一
- 因为只有64个字符，所以一个存储单位只能存 2^6就是6个比特位。但是二进制中一个字节是8个比特位。由于8和6的最小公倍数是24，因此用4个base64字符，表示3个二进制字节。就导致了内容会增大三分之一。（正常）
## 非ASCII码字符的处理
base64只能对ASCII字符集编码，所以别的字符需要先转换一下。
1. encodeURIComponment或者encodeURI处理下。
2. 因为是js环境，字符串是UTF-16，先把字符转到Uint6Array，再Uint16Array => Uint8Array，再去编码.
## 编解码的方法
### btoa
编码：将字符串或二进制值转换成Base64编码字符串
### atob
解码：对base64 编码的字符串进行解码

