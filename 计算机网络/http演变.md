## http1.0
### 特性
短连接：每次http请求都要建立TCP连接
### 解决问题
### 存在问题
http1.0中每一对http的请求和响应都需要建立断开tcp连接，对资源消耗很大。
### 优化方案
- 合并文件，减少请求的次数：雪碧图，合并CSS、JS文件
- 实现长连接：把Connection设置成close以外的其它参数都可以让其保持长连接，通常会设置为retry-after

## http1.1
### 特性
持久连接(长连接)：设置conection和keep-alive,实现一次TCP连接之后多次HTTP请求
### 解决问题
解决了http1.0中每次请求都需要建立断开TCP连接。
实现一次TCP连接中多次HTTP请求与响应。
解决了对同一个服务器发起请求时重复的TCP连接与断开。
### 存在问题
#### 增加服务器压力
即使TCP连接在空闲状态，它还是会消耗服务器资源。
#### 高延迟
页面访问速度下降，主要是因为队头阻塞，建立TCP连接后，HTTP请求必须是串行的，必须得到上一次请求的响应后才能发起下一次请求
#### 头部臃肿且重复
http无状态导致的头部巨大且重复，每个请求都携带头部。
#### 不支持服务器推送
只能轮询服务器，浪费了大量的资源和带宽
### 优化方案
#### 高延迟
1. 域名分片：将页面所需资源放入不同域名中，就能建立多个TCP连接。
2. 雪碧图：把多个图片放入一个大图中
3. 小图内联：把较小的图片的二进制代码使用base64编码，直接嵌入到HTML或者CSS文件中，减少请求
4. 管线化技术：在没有接收到上一次请求的响应时就发送下一次请求。存在问题，默认不用
5. 打包CSS，JS文件成一个文件
6. 按需加载(懒加载)：减少第一时间的http请求次数
![image](https://image-1301623187.cos.ap-nanjing.myqcloud.com/browser/http/HTTP1_x_Connections.png)

## http2.0
### 特性
#### 多路复用：
![image](https://image-1301623187.cos.ap-nanjing.myqcloud.com/browser/http/duolufuyong.png)
1. 多个请求可以并发的发送。这就避免了http1.1中的队头阻塞
2. 数据流：每个请求或响应被称为一个流，请求和响应都互不影响，并行交错的发送，所以必须要有一个ID标记每一个包属于哪个流。然后还规定了客户端ID是奇数，服务端ID是偶数。客户端和服务端还都可以发送信号(RST_STREAM帧)取消数据流就是取消请求或响应。
3. 实现了优先级，每一个请求能携带一个优先级值，0是最高优先级，客户端和服务端处理不同的流时采用不同的策略。

#### 封装成帧
在http和tcp中间增加了二进制分帧层，就是把http请求转化为二进制帧后再进入tcp。头部信息会封装到HEADERS帧，RequestBody会封装到DATA帧中
#### 头部压缩：
1. 头信息经过gzip或者compress压缩之后再发送
2. 客户端和服务端会维持一张头信息表，所有字段都存在这个表中，然后生成一个索引号，每次请求只发索引号，
![image](https://image-1301623187.cos.ap-nanjing.myqcloud.com/browser/http/httpheader.jpg)

#### 服务端主动推送
服务端主动向客户端发资源。客户端可以选择是否接受，就是发送RST_STREAM帧，主动推送也要遵守同源协议
#### 安全性
hhtp2.0支持http1.1的明文特点，但是主流浏览器只支持加密的http2.0，就是加上TLS。
### 解决问题
解决了http1.1中必须要得到上一次请求的响应后才能发起下一次请求的问题。
解决了臃肿的头部信息
### 存在问题

### 优化方案

## http3.0
### 特性
- 使用了基于UDP的QUIC协议，实现有款有可靠的传输
- UDP中没有错误检查，所以相比于TCP可以更快通信。
- QUIC协议负责合并纠错，重建丢失数据。实现了可靠交付。

### 解决问题
传输效率更高，速度更快。
### 存在问题

